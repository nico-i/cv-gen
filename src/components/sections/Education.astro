---
import Card from "@/components/ui/Card.astro";
import ExternalIconLink from "@/components/ui/ExternalIconLink.astro";
import GradedListItem from "@/components/ui/GradedListItem.astro";
import SectionTitle from "@/components/ui/SectionTitle.astro";
import Svg from "@/components/ui/Svg.astro";
import TimeWindow from "@/components/ui/TimeWindow.astro";
import Typography from "@/components/ui/Typography.astro";
import { Ed } from "@/lib/domain/ed";
import { useTranslation } from "@/lib/i18n/utils";
import type { EntityByLocale } from "@/lib/types/EntityByLocale";
import type { Locale } from "@/lib/types/Locale";
import GraduationCap from "@/svg/graduation-cap.svg?raw";
import University from "@/svg/university.svg?raw";

interface Props {
  localizedEds: EntityByLocale<Ed>[] | undefined;
  locale: Locale;
}

const { localizedEds, locale }: Props = Astro.props;
const { t } = useTranslation(locale);
---

<Card>
  <Fragment slot="title">
    <SectionTitle title={t("education")} svgHtml={GraduationCap} />
  </Fragment>
  <Fragment slot="content">
    <ul class="flex flex-col gap-5">
      {
        localizedEds?.map((ed) => {
          const localizedEd = ed[locale];

          return (
            <GradedListItem
              grade={localizedEd?.grade}
              docUrl={localizedEd?.docUrl}
            >
              <span slot="title">
                {localizedEd?.institute}{" "}
                {localizedEd?.url && (
                  <ExternalIconLink href={localizedEd?.url} />
                )}
              </span>

              <div class="flex flex-col gap-0.5" slot="subtitle">
                <Typography variant="muted">
                  <Svg svgHtml={University} />
                  {localizedEd?.degree}
                </Typography>
                <TimeWindow
                  start={localizedEd?.start}
                  end={localizedEd?.end}
                  locale={locale}
                />
              </div>
            </GradedListItem>
          );
        })
      }
    </ul>
  </Fragment>
</Card>
